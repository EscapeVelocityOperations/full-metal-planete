{"id":"fmp-00b6","title":"Implement tide mechanics","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T13:54:01.086607+01:00","updated_at":"2025-11-30T14:37:20.099064+01:00","closed_at":"2025-11-30T14:37:20.099064+01:00"}
{"id":"fmp-0193","title":"Implement initial position setup phase","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-30T16:30:40.755023+01:00","updated_at":"2025-11-30T16:30:40.755023+01:00","closed_at":"2025-11-30T19:11:54Z","dependencies":[{"issue_id":"fmp-0193","depends_on_id":"fmp-02b3","type":"blocks","created_at":"2025-11-30T16:30:47.413663+01:00","created_by":"daemon"}]}
{"id":"fmp-02b3","title":"Implement player turn system and turn order","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-30T16:30:40.481521+01:00","updated_at":"2025-11-30T16:30:40.481521+01:00","closed_at":"2025-11-30T19:06:10Z","dependencies":[{"issue_id":"fmp-02b3","depends_on_id":"fmp-34e2","type":"blocks","created_at":"2025-11-30T16:30:47.230613+01:00","created_by":"daemon"}]}
{"id":"fmp-0329","title":"Implement cargo loading/unloading for transporters","description":"Allow Barge, Crab, and Converter to load/unload units and minerals. Validate cargo capacity, unit size restrictions, and adjacency requirements.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T15:26:01.815947+01:00","updated_at":"2025-12-14T15:26:01.815947+01:00"}
{"id":"fmp-138f","title":"Setup TypeScript project with WebGPU types","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T13:54:00.621431+01:00","updated_at":"2025-11-30T14:37:14.38028+01:00","closed_at":"2025-11-30T14:37:14.38028+01:00"}
{"id":"fmp-14b5","title":"Implement unit capture system in Lab Mode","description":"Implement the unit capture mechanic allowing players to take control of enemy units in Lab Mode.\n\n## Game Rules (from docs/01-RULES.md)\n\n### Capture Rule (Section 6.4)\nTwo combat units can **capture** an enemy unit by moving adjacent to it.\n\n**Requirements**:\n- Both attackers must be adjacent to target\n- All involved units (2 attackers + target) must be free from enemy fire\n- Cost: 1 AP total\n\n**Effects**:\n- Unit immediately changes ownership\n- New owner can use it that same turn\n- Transporter contents are captured with it\n\n## Combat Units That Can Capture\n- Tank\n- Super Tank  \n- Motor Boat\n- Tower (if adjacent, which is rare given they're on Astronef)\n\n## UI Requirements\n1. **Capture Mode**: Toggle or automatic detection when conditions met\n2. **Adjacency Check**: Highlight when 2 combat units are adjacent to same enemy\n3. **Fire Zone Check**: Verify no unit is under enemy fire (within range of 2+ enemy combat units)\n4. **Capture Indicator**: Visual feedback showing capture is possible\n5. **Ownership Transfer**: Animate color change on captured unit\n6. **AP Tracking**: Deduct 1 AP for capture action\n7. **Cargo Transfer**: Handle transporter contents on capture\n\n## Implementation Steps\n1. Add adjacency helper function to hex utils\n2. Create \"under fire\" zone calculation\n3. Detect capture opportunity when 2 combat units adjacent to enemy\n4. Add capture mode toggle or auto-detection\n5. Implement capture action with ownership transfer\n6. Handle transporter cargo on capture\n7. Update unit colors/indicators on capture","acceptance_criteria":"- [ ] Detect when 2 friendly combat units are adjacent to same enemy unit\n- [ ] Verify capture conditions (not under enemy fire)\n- [ ] Display capture indicator when capture is possible\n- [ ] Execute capture with 1 AP cost\n- [ ] Transfer unit ownership with visual feedback\n- [ ] Handle transporter cargo transfer on capture\n- [ ] Touch-friendly controls (min 44px buttons)\n- [ ] New owner can use captured unit same turn","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T15:46:09.386223+01:00","updated_at":"2025-12-14T15:46:09.386223+01:00","labels":["capture","combat","gameplay","lab-mode","ui"],"dependencies":[{"issue_id":"fmp-14b5","depends_on_id":"fmp-cc81","type":"blocks","created_at":"2025-12-14T15:47:03.532819+01:00","created_by":"daemon"}]}
{"id":"fmp-1578","title":"Implement Converter building mechanics","description":"Allow Converter to build new units from minerals. Implement the building queue (2 regular per turn, 1 special), mineral consumption, and unit construction.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T15:26:13.794139+01:00","updated_at":"2025-12-14T15:26:13.794139+01:00"}
{"id":"fmp-1cc8","title":"Implement game state types and interfaces","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T13:54:00.8962+01:00","updated_at":"2025-11-30T14:37:20.069207+01:00","closed_at":"2025-11-30T14:37:20.069207+01:00"}
{"id":"fmp-34e2","title":"Implement tide selection and tide cycle mechanics","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-30T16:30:40.214726+01:00","updated_at":"2025-11-30T16:30:40.214726+01:00","closed_at":"2025-11-30T19:02:33Z","dependencies":[{"issue_id":"fmp-34e2","depends_on_id":"fmp-3592","type":"blocks","created_at":"2025-11-30T16:30:47.046198+01:00","created_by":"daemon"}]}
{"id":"fmp-3592","title":"Implement map generation with mineral placement","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-30T16:30:39.952284+01:00","updated_at":"2025-11-30T16:30:39.952284+01:00","closed_at":"2025-11-30T18:50:26Z"}
{"id":"fmp-41a5","title":"Implement unit deployment during setup","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-30T16:30:41.029934+01:00","updated_at":"2025-11-30T16:30:41.029934+01:00","closed_at":"2025-11-30T19:11:54Z","dependencies":[{"issue_id":"fmp-41a5","depends_on_id":"fmp-0193","type":"blocks","created_at":"2025-11-30T16:30:47.598025+01:00","created_by":"daemon"}]}
{"id":"fmp-45e5","title":"Implement scoring and victory conditions","description":"Calculate and display scores based on minerals (2 pts), equipment (1 pt), and turrets (1 pt). Determine winner at game end (turn 21 or 25).","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-14T15:26:13.868285+01:00","updated_at":"2025-12-14T15:26:13.868285+01:00"}
{"id":"fmp-482c","title":"WebGPU/WebGL Renderer","description":"","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-30T13:53:52.279877+01:00","updated_at":"2025-11-30T14:37:20.114249+01:00","closed_at":"2025-11-30T14:37:20.114249+01:00"}
{"id":"fmp-6206","title":"Create WebGPU render pipeline for terrain","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T13:54:00.803787+01:00","updated_at":"2025-11-30T14:37:20.054267+01:00","closed_at":"2025-11-30T14:37:20.054267+01:00"}
{"id":"fmp-62c2","title":"Astronef not visible after landing (unit rendering missing)","description":"The CSS renderer only renders terrain, not units. After landing the astronef, it is not visible on the map because there is no setUnits() method in the CSS renderer.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-30T22:12:10.840758+01:00","updated_at":"2025-11-30T22:16:28.716866+01:00","closed_at":"2025-11-30T22:16:28.716868+01:00"}
{"id":"fmp-6b51","title":"Replace canvas rendering with HTML/CSS sprite-based rendering","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-30T16:26:09.436381+01:00","updated_at":"2025-11-30T16:32:40.872289+01:00","closed_at":"2025-11-30T16:32:40.872291+01:00"}
{"id":"fmp-7599","title":"Generate sprite assets for terrain and unit types","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T16:26:13.897061+01:00","updated_at":"2025-11-30T16:26:13.897061+01:00","closed_at":"2025-11-30T18:02:51Z","dependencies":[{"issue_id":"fmp-7599","depends_on_id":"fmp-6b51","type":"blocks","created_at":"2025-11-30T16:26:43.955139+01:00","created_by":"daemon"}]}
{"id":"fmp-7893","title":"Add unit inventory UI for deployment phase","description":"During deployment phase, show an inventory panel displaying available units for deployment. Units should be clickable and rotatable before placement.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-30T22:12:19.949727+01:00","updated_at":"2025-12-01T08:10:38.419585+01:00","closed_at":"2025-12-01T08:10:38.419585+01:00"}
{"id":"fmp-7dee","title":"Add terrain movement restrictions for units","description":"Implement terrain-based movement validation:\n- Boats (MotorBoat, Barge) can only move on sea terrain\n- Land units (Tank, SuperTank, Crab, Converter) cannot move on water\n- SuperTank (heavy tank) cannot enter mountains\n- Regular Tank CAN enter mountains\n\nThis should be enforced both in movement validation and in path calculation.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T17:00:31.670878+01:00","updated_at":"2025-12-14T17:00:31.670878+01:00","labels":["movement","rules","terrain"]}
{"id":"fmp-8029","title":"Astronef not rendering in game mode","description":"The Astronef (4-hex spacecraft) is not visible on the map during gameplay. The unit may exist in gameState but is not being rendered. Need to verify:\n1. Astronef position is correctly set after landing\n2. CSS renderer handles multi-hex units properly\n3. Unit sprite rendering includes Astronef type","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-14T17:00:31.772315+01:00","updated_at":"2025-12-14T17:00:31.772315+01:00","labels":["astronef","multi-hex","rendering"]}
{"id":"fmp-802c","title":"Enable rotation for all unit types","description":"Allow all units to be rotated during placement and gameplay, not just multi-hex units. Update UNIT_SHAPES to set canRotate: true for all unit types. Add rotation controls to the deployment UI and ensure the CSS renderer applies rotation transforms to all unit sprites.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T15:28:20.529837+01:00","updated_at":"2025-12-14T15:28:20.529837+01:00"}
{"id":"fmp-8f6b","title":"Connect game client to WebSocket for real-time sync","description":"Connect the game client to the WebSocket server for real-time game state synchronization between players. Handle reconnection, state reconciliation, and action broadcasting.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-14T15:26:01.617633+01:00","updated_at":"2025-12-14T15:26:01.617633+01:00"}
{"id":"fmp-9334","title":"Implement unit movement with path validation","description":"Implement click-to-move for units with path validation. Single-click on unit to select, click on valid destination hex to move. Validate terrain passability, action point cost, and multi-hex unit collision detection.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-14T15:26:01.455561+01:00","updated_at":"2025-12-14T15:26:01.455561+01:00"}
{"id":"fmp-9ab2","title":"Add astronef rotation during landing phase","description":"During landing phase, allow players to rotate the astronef before placing it. The astronef occupies 4 hexes and players should be able to choose the orientation.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-30T22:12:19.668731+01:00","updated_at":"2025-12-01T08:10:38.313112+01:00","closed_at":"2025-12-01T08:10:38.313112+01:00"}
{"id":"fmp-9b27","title":"Implement action point system","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T13:54:00.989977+01:00","updated_at":"2025-11-30T14:37:20.084349+01:00","closed_at":"2025-11-30T14:37:20.084349+01:00"}
{"id":"fmp-9ca8","title":"Fix Astronef shape: 1 center + 3 turret hexes","description":"The Astronef should be 4 hexes: 1 center hex (body) with 3 turret hexes attached around it. Current shape in UNIT_SHAPES may not match the original game design. Update the offsets to correctly position the 3 turrets around the center, and update the CSS renderer sprite to match this layout.","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-14T15:28:20.472582+01:00","updated_at":"2025-12-14T15:28:20.472582+01:00"}
{"id":"fmp-a342","title":"Implement hex grid coordinate system","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T13:54:00.712227+01:00","updated_at":"2025-11-30T14:37:20.039006+01:00","closed_at":"2025-11-30T14:37:20.039006+01:00"}
{"id":"fmp-a4f6","title":"Fix TypeScript errors in test files","description":"Fix TypeScript compilation errors in test files. Update test setup for Bun test runner, fix enum usage, and resolve type mismatches.","status":"open","priority":3,"issue_type":"chore","created_at":"2025-12-14T15:26:13.937984+01:00","updated_at":"2025-12-14T15:26:13.937984+01:00"}
{"id":"fmp-ac84","title":"Game UI Components","description":"","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-30T13:53:52.547791+01:00","updated_at":"2025-11-30T14:37:20.158872+01:00","closed_at":"2025-11-30T14:37:20.158872+01:00"}
{"id":"fmp-c56a","title":"Lab Mode: Setup mode and Play simulation mode with touch support","description":"Enhance Lab Mode with two distinct modes and full touch device support:\n\n## Setup Mode (current + improvements)\n- Place Astronef (4 hexes) on valid terrain (plain/marsh only)\n- Deploy units from Astronef to adjacent hexes (arrival zone)\n- Rotate units before placement (tap to rotate on touch)\n- Visual feedback for valid/invalid placement zones\n\n## Play Simulation Mode (new)\n- Simulate a player turn with 15 AP\n- Unit selection: tap unit to select, show action menu\n- Movement: tap destination hex, show path preview with AP cost\n- Load/Unload: context menu on transporters (Barge/Crab/Converter)\n- Combat: select 2 friendly units, then target hex for crossfire\n- AP counter display with real-time updates\n- End turn button to reset AP\n\n## Touch Device Requirements\n- All interactions must work with tap/touch (no hover states required)\n- Long-press for context menus (rotate, load/unload options)\n- Pinch-to-zoom already implemented\n- Two-finger pan for scrolling\n- Touch-friendly button sizes (min 44px)\n- Visual feedback on touch (highlight selected hex/unit)\n\n## Mode Switching\n- Toggle button in control panel: \"Setup\" / \"Play\"\n- Clear visual indicator of current mode\n- Preserve placed units when switching modes","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-14T15:33:15.368496+01:00","updated_at":"2025-12-14T15:33:15.368496+01:00","labels":["gameplay","lab-mode","touch"]}
{"id":"fmp-cc81","title":"Implement combat system (fire and capture)","description":"Implement crossfire combat where 2 units fire at a target hex. Include unit destruction, capture mechanics for neutralized units, and turret destruction for Astronefs.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-14T15:26:01.535725+01:00","updated_at":"2025-12-14T15:51:21.487102+01:00","closed_at":"2025-12-14T15:51:21.487102+01:00"}
{"id":"fmp-d253","title":"Implement game setup phases (Turn 1 Landing, Turn 2 Deployment)","description":"Implement the initial game setup phases for multiplayer:\n\n## Turn 1: Landing Phase\n- Each player has 3 minutes to choose landing zone\n- Place Astronef (4 hexes) on valid terrain:\n  - Plain or marsh hexes only\n  - Cannot land adjacent to another player's landing zone\n  - Must have viable exit paths\n- Sequential player order (determined at game start)\n- Validate landing zone boundaries (zones 1-8 on map)\n\n## Turn 2: Deployment Phase  \n- All players deploy simultaneously (3 min shared)\n- Deploy starting force from Astronef to arrival zone:\n  - 3 Towers (remain on Astronef turret hexes)\n  - 1 Barge, 1 Crab, 1 Converter\n  - 2 Motor Boats, 4 Tanks, 1 Super Tank\n  - 1 Bridge\n- Units must be placed in/adjacent to Astronef hexes\n- Sea units in sea hexes, land units on land hexes\n\n## State Transitions\n- Landing → Deployment when all players placed Astronef\n- Deployment → Playing (Turn 3) when timer expires or all ready\n- Turn 3 starts with only 5 AP per player","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-14T15:33:30.097466+01:00","updated_at":"2025-12-14T15:33:30.097466+01:00","labels":["game-phases","multiplayer"]}
{"id":"fmp-e68f","title":"Home page with Create/Join game functionality","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-30T16:17:15.463723+01:00","updated_at":"2025-11-30T16:21:44.532492+01:00","closed_at":"2025-11-30T16:21:44.532492+01:00"}
{"id":"fmp-e802","title":"Game Rules Engine","description":"","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-30T13:53:52.367005+01:00","updated_at":"2025-11-30T14:37:20.129035+01:00","closed_at":"2025-11-30T14:37:20.129035+01:00"}
{"id":"fmp-eab8","title":"Implement turn timer and end turn mechanics","description":"Add 3-minute turn timer with visual countdown. Implement end turn button, action point saving (up to 10), and automatic turn end on timeout.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T15:26:01.706947+01:00","updated_at":"2025-12-14T15:26:01.706947+01:00"}
{"id":"fmp-f270","title":"Backend Sync Service","description":"","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-30T13:53:52.456663+01:00","updated_at":"2025-11-30T14:37:20.143795+01:00","closed_at":"2025-11-30T14:37:20.143795+01:00"}
{"id":"fmp-f845","title":"Add movement preview with path highlighting and AP cost","description":"When a unit is selected in move mode:\n1. First click on destination hex should:\n   - Calculate the path from unit position to destination\n   - Highlight all hexes in the path\n   - Display the total AP cost for the move\n2. Second click on the same hex should confirm the movement\n3. Click elsewhere should cancel and recalculate path\n\nThis provides better UX by showing users what the move will cost before committing.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T17:00:31.712941+01:00","updated_at":"2025-12-14T17:00:31.712941+01:00","labels":["movement","ui","ux"]}
{"id":"fmp-fa38","title":"Implement shooting/combat system in Lab Mode","description":"Implement the shooting/combat system allowing players to destroy enemy units in Lab Mode.\n\n## Game Rules (from docs/01-RULES.md)\n- **Destruction Rule**: A unit is destroyed when under simultaneous fire from 2 combat units of the same player\n- **Cost**: 1 AP per shot (2 AP total = 2 shots to destroy)\n- **Max shots**: Each combat unit may fire max 2 times per turn\n- **Range**: Combat units can shoot over any obstacle (minerals, vehicles, mountains)\n\n## Combat Unit Ranges\n| Unit | Domain | Range | Mountain Bonus |\n|------|--------|-------|----------------|\n| Tank | Land | 2 hex | 3 hex range on mountain |\n| Super Tank | Land | 3 hex | N/A |\n| Motor Boat | Sea | 2 hex | N/A |\n| Tower | Fixed | 2 hex | On Astronef only |\n\n## UI Requirements\n1. **Shooting Mode**: Toggle to enter shooting mode (vs movement mode)\n2. **Unit Selection**: Select 2 friendly combat units for coordinated fire\n3. **Range Visualization**: Display reachable/targetable hexes when 2 units selected\n4. **Target Highlighting**: Show intersection of both units' ranges (valid targets)\n5. **AP Tracking**: Deduct 2 AP when shot executed (1 AP per shooter)\n6. **Shot Counter**: Track shots per unit (max 2 per turn)\n\n## Implementation Steps\n1. Add COMBAT_RANGES constant to shared/game/types.ts\n2. Create hex range calculation function (respecting terrain and mountain bonus)\n3. Add shooting mode toggle in Lab Mode UI\n4. Implement multi-select for combat units\n5. Calculate and visualize range intersection\n6. Add shoot action with AP deduction\n7. Track shots-per-unit-per-turn","acceptance_criteria":"- [ ] Combat units can be selected for shooting (Tank, Super Tank, Motor Boat, Tower)\n- [ ] Selecting 2 combat units shows intersection of their firing ranges\n- [ ] Valid targets (enemy units in range of both) are highlighted\n- [ ] Shooting costs 2 AP total (1 per shooter)\n- [ ] Each unit can fire max 2 times per turn\n- [ ] Mountain bonus applies to Tanks (3 hex range on mountain)\n- [ ] Touch-friendly controls (min 44px buttons)\n- [ ] Visual feedback on successful shot","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-14T15:45:56.284089+01:00","updated_at":"2025-12-14T15:56:27.952137+01:00","closed_at":"2025-12-14T15:56:27.952137+01:00","labels":["combat","gameplay","lab-mode","ui"],"dependencies":[{"issue_id":"fmp-fa38","depends_on_id":"fmp-cc81","type":"blocks","created_at":"2025-12-14T15:47:03.472516+01:00","created_by":"daemon"}]}
{"id":"fmp-fd1b","title":"Units not displayed in deployment phase - inventory shows 0 of 0","description":"In the actual game (not lab mode), during deployment phase, the \"Deploy Units\" panel shows \"0 of 0 units remaining\" and no units are available for selection. The issue appears to be that units are not being properly passed to the deployment inventory - likely the gameState.units array is empty or units aren't being filtered correctly by player color.","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-14T17:00:31.623648+01:00","updated_at":"2025-12-14T17:00:31.623648+01:00","labels":["deployment","game-mode","ui"]}
